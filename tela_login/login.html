<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="css/style.css">



</head>
<body>
      <div>
        
            <img class="imageBank" src="img/banco_digital.jpg" >
       
      

        <div class="container">
          
        <div id="card">
          <div id="card-content">
            <div id="card-title">
              <h2>Faça seu login</h2>
            </div>
            <form method="post" class="form">
              <label for="user-email" >
                  &nbsp;Email
                </label>
              <input  id="user-email" class="form-content"  type="email" name="email" autocomplete="on" required />
              <div class="form-border"></div>
              <label for="user-password" style="padding-top:22px">&nbsp;Password
                </label>
              <input id="user-password" class="form-content" type="password" name="password" required />
              <div class="form-border"></div>
              <div style="padding-top: 5px;">
                <input type="checkbox" id="remember" name="remember" >
                <label for="remember">Lembrar-me</label>
              </div>  
             <button id="submit-btn" onclick="logar()" name="submit"  >Entrar</button>
              <a href="#" id="forgotPassword" >Esqueceu a senha?</a>
              <a class="about">JFMBank, o banco que sempre estará ao seu lado</a>

              <a href="#" onclick="abrirCadastro()" id="signup">Abra sua conta</a>
            </form>
          </div>
        </div>
</div>

<script>
  var email=document.getElementById("user-email").value;
  var senha=document.getElementById("user-password").value;


  function abrirCadastro(){
    var directory=window.location.href;
    directory= directory.replace("/tela_login/login.html","/tela_cadastro/pagina.html");

      window.open(directory);
  }



function logar(){
  var novUrl=window.location.href;
  novUrl= novUrl.replace("/tela_login/login.html","/tela_pagamentos/pagamentos.html");
  let url="http://localhost:8080/api/cadastro-cliente";
  var existe=false;

if(email!='' && senha!=''){
    let data= get(url);
    let usuarios=JSON.parse(data);
    console.log(usuarios);

    usuarios.array.forEach(element => {
      var user=existeUsuario(element,email,senha);
      if(user==true){
          existe=true;
      }

    });
    if(existe){
      window.open(novUrl);
    }

  }
  
}

function get(url){
  let request= new XMLHttpRequest()
    request.open("GET",url,true)
    request.setRequestHeader('Content-type','application/json')
    request.setRequestHeader('Access-Control-Allow-Origin','*')
    request.setRequestHeader('Access-Control-Allow-Methods','OPTIONS,POST,GET')

    request.send()
    

   return request.responseText
}

function existeUsuario(usuario,Email,senha){
  var email=usuario.email;
  var password=usuario.password;
  if(email==Email && password==senha){
    return true;
  }

return false;
}
</script>

</body>
</html>

